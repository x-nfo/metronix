import{s as S,J as B,l as I,x as V,y as M,O as U,z as D,g as b,b as n,u as L,w as i,F as v,p as P,o as g,X as j,d as t,A as r,C as c,e as k,t as d,D as N,G as A}from"./vendor-8a5f3a62.js";import{u as h,_ as E,a as F}from"./InputSearch-bfe4cdde.js";import{_ as G,a as T}from"./AuthenticatedLayout-59967d73.js";import{_ as z}from"./PrimaryButton-12788682.js";import{_ as J}from"./SelectInput-d84ecef5.js";import{_ as K}from"./DangerButton-5bdc9eaa.js";import{_ as X}from"./Checkbox-1a7b50c6.js";import{_ as Z}from"./Card-31894d03.js";import q from"./Create-2d016610.js";import H from"./Edit-b9247cc9.js";import Q from"./Delete-698d2719.js";import R from"./DeleteBulk-1a40ca8c.js";import"./SwitchLangNavbar-67ae8192.js";import"./TextInput-9d3a867a.js";import"./SecondaryButton-6813abc4.js";const W={class:"d-flex gap-2"},Y={class:"perpage"},ee={class:"d-flex justify-content-end gap-2"},te=t("i",{class:"fa-thin fa-plus"},null,-1),le={class:"table align-middle table-row-dashed fs-6 gy-5"},se={class:"text-start text-muted fw-bold fs-7 text-uppercase gs-0"},ae={class:"w-10px pe-2"},ne={class:"d-flex gap-2"},oe=t("i",{class:"fa-sharp fa-solid fa-sort"},null,-1),de=t("div",{class:"d-flex gap-2"},[t("i",{class:"fa-sharp fa-solid fa-sort"}),t("span",null,"Guard")],-1),ie=[de],re={class:"d-flex gap-2"},me=t("i",{class:"fa-sharp fa-solid fa-sort"},null,-1),pe={class:"d-flex gap-2"},ce=t("i",{class:"fa-sharp fa-solid fa-sort"},null,-1),ue={class:"text-end"},fe={class:"text-gray-600 fw-semibold"},_e={class:"form-check form-check-custom form-check-solid"},he=["value"],be={class:"text-end"},ge=t("span",{class:"svg-icon svg-icon-5 m-0"},[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M11.4343 12.7344L7.25 8.55005C6.83579 8.13583 6.16421 8.13584 5.75 8.55005C5.33579 8.96426 5.33579 9.63583 5.75 10.05L11.2929 15.5929C11.6834 15.9835 12.3166 15.9835 12.7071 15.5929L18.25 10.05C18.6642 9.63584 18.6642 8.96426 18.25 8.55005C17.8358 8.13584 17.1642 8.13584 16.75 8.55005L12.5657 12.7344C12.2533 13.0468 11.7467 13.0468 11.4343 12.7344Z",fill:"currentColor"})])],-1),ke={class:"menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-semibold fs-7 w-125px py-4","data-kt-menu":"true"},ve={class:"menu-item px-3"},we=["onClick"],Ce={class:"menu-item px-3"},$e=["onClick"],Ee={__name:"Index",props:{title:String,filters:Object,permissions:Object,breadcrumbs:Object,perPage:Number},setup(u){const o=u,{_:w,debounce:C,pickBy:$}=P,e=S({params:{search:o.filters.search,field:o.filters.field,order:o.filters.order,perPage:o.perPage},permission:null,dataSet:B().props.app.perpage,modal_create:null,modal_edit:null,modal_delete:null,modal_delete_bulk:null,modal_permission:null,createOpen:!1,editOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,selectedId:[],multipleSelect:!1});I(()=>{e.modal_create=h("#modal_create"),e.modal_edit=h("#modal_edit"),e.modal_delete=h("#modal_delete"),e.modal_delete_bulk=h("#modal_delete_bulk")}),V(()=>{KTMenu.init()});const f=s=>{e.params.field=s,e.params.order=e.params.order==="asc"?"desc":"asc"};M(()=>w.cloneDeep(e.params),C(()=>{let s=$(e.params);U.get(route("permission.index"),s,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const O=s=>{var l;s.target.checked===!1?e.selectedId=[]:(l=o.permissions)==null||l.data.forEach(a=>{e.selectedId.push(a.id)})},x=()=>{var s;((s=o.permissions)==null?void 0:s.data.length)==e.selectedId.length?e.multipleSelect=!0:e.multipleSelect=!1},_=s=>{switch(s){case"create":e.modal_create.show(),e.createOpen=!0;break;case"edit":e.modal_edit.show(),e.editOpen=!0;break;case"delete":e.modal_delete.show(),e.deleteOpen=!0;break;case"deleteBulk":e.modal_delete_bulk.show(),e.deleteBulkOpen=!0;break}},m=s=>{switch(s){case"create":e.modal_create.hide(),e.createOpen=!1;break;case"edit":e.modal_edit.hide(),e.editOpen=!1;break;case"delete":e.modal_delete.hide(),e.deleteOpen=!1;break;case"deleteBulk":e.modal_delete_bulk.hide(),e.deleteBulkOpen=!1,e.multipleSelect=!1,e.selectedId=[];break}};return D(()=>{m()}),(s,l)=>(g(),b(v,null,[n(L(j),{title:o.title},null,8,["title"]),n(G,null,{default:i(()=>[n(T,{title:u.title,breadcrumbs:u.breadcrumbs},null,8,["title","breadcrumbs"]),n(Z,null,{title:i(()=>[t("div",W,[t("div",Y,[n(J,{modelValue:e.params.perPage,"onUpdate:modelValue":l[0]||(l[0]=a=>e.params.perPage=a),dataSet:e.dataSet},null,8,["modelValue","dataSet"])]),n(E,{modelValue:e.params.search,"onUpdate:modelValue":l[1]||(l[1]=a=>e.params.search=a),placeholder:s.lang().placeholder.search},null,8,["modelValue","placeholder"]),n(q,{show:e.createOpen,onClose:l[2]||(l[2]=a=>m("create")),title:o.title},null,8,["show","title"]),n(H,{show:e.editOpen,onClose:l[3]||(l[3]=a=>m("edit")),permission:e.permission,title:o.title},null,8,["show","permission","title"]),n(Q,{show:e.deleteOpen,onClose:l[4]||(l[4]=a=>m("delete")),permission:e.permission,title:o.title},null,8,["show","permission","title"]),n(R,{show:e.deleteBulkOpen,onClose:l[5]||(l[5]=a=>m("deleteBulk")),selectedId:e.selectedId,title:o.title},null,8,["show","selectedId","title"])])]),toolbar:i(()=>[t("div",ee,[r(n(K,{onClick:l[6]||(l[6]=a=>_("deleteBulk"))},{default:i(()=>[k(" Delete Selected ")]),_:1},512),[[c,e.selectedId.length!=0&&s.can(["delete permission"])]]),r(n(z,{class:"rounded-none",onClick:l[7]||(l[7]=a=>_("create"))},{default:i(()=>[te,k(" "+d(s.lang().button.add)+" "+d(o.title),1)]),_:1},512),[[c,e.selectedId.length==0&&s.can(["create permission"])]])])]),body:i(()=>[t("table",le,[t("thead",null,[t("tr",se,[t("th",ae,[n(X,{checked:e.multipleSelect,"onUpdate:checked":l[8]||(l[8]=a=>e.multipleSelect=a),onChange:O},null,8,["checked"])]),t("th",{class:"min-w-125px",onClick:l[9]||(l[9]=a=>f("name"))},[t("div",ne,[oe,t("span",null,d(s.lang().label.name),1)])]),t("th",{class:"min-w-125px",onClick:l[10]||(l[10]=a=>f("guard"))},ie),t("th",{class:"min-w-125px",onClick:l[11]||(l[11]=a=>f("created_at"))},[t("div",re,[me,t("span",null,d(s.lang().label.created),1)])]),t("th",{class:"min-w-125px",onClick:l[12]||(l[12]=a=>f("updated_at"))},[t("div",pe,[ce,t("span",null,d(s.lang().label.updated),1)])]),t("th",ue,d(s.lang().label.action),1)])]),t("tbody",fe,[(g(!0),b(v,null,N(u.permissions.data,(a,y)=>(g(),b("tr",{key:y},[t("td",null,[t("div",_e,[r(t("input",{class:"form-check-input",type:"checkbox",onChange:x,value:a.id,"onUpdate:modelValue":l[13]||(l[13]=p=>e.selectedId=p)},null,40,he),[[A,e.selectedId]])])]),t("td",null,d(a.name),1),t("td",null,d(a.guard_name),1),t("td",null,d(a.created_at),1),t("td",null,d(a.updated_at),1),t("td",be,[r(t("a",{type:"button",class:"btn btn-light btn-active-light-primary btn-sm","data-kt-menu-trigger":"hover","data-kt-menu-placement":"bottom-end",onClick:l[14]||(l[14]=(...p)=>s.showMenu&&s.showMenu(...p))},[k(d(s.lang().label.action)+" ",1),ge],512),[[c,s.can(["update permission"])]]),t("div",ke,[t("div",ve,[r(t("a",{type:"button",class:"menu-link px-3",onClick:p=>(_("edit"),e.permission=a)},d(s.lang().label.edit),9,we),[[c,s.can(["update permission"])]])]),t("div",Ce,[r(t("a",{class:"menu-link px-3",type:"button",onClick:p=>(_("delete"),e.permission=a)},d(s.lang().label.delete),9,$e),[[c,s.can(["delete permission"])]])])])])]))),128))])])]),footer:i(()=>[n(F,{links:o.permissions,filters:e.params},null,8,["links","filters"])]),_:1})]),_:1})],64))}};export{Ee as default};
