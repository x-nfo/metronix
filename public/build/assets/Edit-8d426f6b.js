import{s as y,v as $,H as C,g as p,b as i,w as m,o as f,e as h,t as c,d as n,u as a,F as V,D as E,f as B,n as q,A as D,G as F}from"./vendor-8a5f3a62.js";import{_ as d,a as N,b as v}from"./TextInput-9d3a867a.js";import{_ as U,a as j}from"./SecondaryButton-6813abc4.js";import{_ as x}from"./PrimaryButton-12788682.js";import{_ as A}from"./Checkbox-1a7b50c6.js";const M={class:"space-y-6"},O=["onSubmit"],R={class:"my-1"},z={class:"mb-8"},G={class:"mb-8 form-group"},H={class:"form-check d-flex align-items-center col-3"},L={class:"form-check form-check-custom form-check-solid"},T=["id","value"],I={class:"d-flex gap-2"},X={__name:"Edit",props:{show:Boolean,title:String,role:Object,permissions:Object},emits:["close"],setup(b,{emit:_}){const t=b,r=y({multipleSelect:!1}),e=$({name:"",permissions:[]}),g=()=>{var s;e.put(route("role.update",(s=t.role)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>{_("close"),e.reset(),r.multipleSelect=!1},onError:()=>null,onFinish:()=>null})};C(()=>{var s,l,o;t.show&&(e.name=(s=t.role)==null?void 0:s.name,e.permissions=(l=t.role.permissions)==null?void 0:l.map(u=>u.id)),t.permissions.length==((o=t.role)==null?void 0:o.permissions.length)?r.multipleSelect=!0:r.multipleSelect=!1});const k=s=>{s.target.checked===!1?e.permissions=[]:(e.permissions=[],t.permissions.forEach(l=>{e.permissions.push(l.id)}))},S=()=>{t.permissions.length==e.permissions.length?r.multipleSelect=!0:r.multipleSelect=!1};return(s,l)=>(f(),p("section",M,[i(U,{id:"modal_edit",width:"mw-850px"},{title:m(()=>[h(c(s.lang().label.edit)+" "+c(t.title),1)]),body:m(()=>[n("form",{onSubmit:B(g,["prevent"])},[n("div",R,[n("div",z,[i(d,{for:"name",value:s.lang().label.role,isRequired:!0},null,8,["value"]),i(N,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:a(e).name,"onUpdate:modelValue":l[0]||(l[0]=o=>a(e).name=o),required:"",placeholder:s.lang().placeholder.name,error:a(e).errors.name},null,8,["modelValue","placeholder","error"]),i(v,{class:"mt-2",message:a(e).errors.name},null,8,["message"])]),n("div",G,[i(d,{value:s.lang().label.permission,isRequired:!0},null,8,["value"]),i(v,{class:"mt-2",message:a(e).errors.permissions},null,8,["message"]),n("div",H,[i(A,{id:"permission-all",class:"me-2",checked:r.multipleSelect,"onUpdate:checked":l[1]||(l[1]=o=>r.multipleSelect=o),onChange:k},null,8,["checked"]),i(d,{for:"permission-all",value:s.lang().label.check_all},null,8,["value"])]),(f(!0),p(V,null,E(t.permissions,(o,u)=>(f(),p("div",{class:"form-check form-check-inline col-3",key:u},[n("div",L,[D(n("input",{onChange:S,class:"form-check-input me-2",type:"checkbox",id:"permission_"+o.id,value:o.id,"onUpdate:modelValue":l[2]||(l[2]=w=>a(e).permissions=w)},null,40,T),[[F,a(e).permissions]]),i(d,{for:"permission_"+o.id,value:o.name},null,8,["for","value"])])]))),128))])])],40,O)]),footer:m(()=>[n("div",I,[i(j,{disabled:a(e).processing,onClick:l[3]||(l[3]=o=>_("close"))},{default:m(()=>[h(c(s.lang().button.close),1)]),_:1},8,["disabled"]),i(x,{class:q(["ml-3",{"opacity-25":a(e).processing}]),disabled:a(e).processing,onClick:g},{default:m(()=>[h(c(a(e).processing?s.lang().button.save+"...":s.lang().button.save),1)]),_:1},8,["class","disabled"])])]),_:1})]))}};export{X as default};
